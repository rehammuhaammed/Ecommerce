@if(isoffline()){
<app-offline-ui [isOff]="isoffline()"></app-offline-ui>
}@else {
      
      @if(myProducts){
      <section class="py-10">
              <div class="container mx-auto px-4">
                
             @if(myProducts.length > 0){
               <h3 class="capitalize text-3xl font-semibold mb-6 text-center text-[#7c4947]">
                  {{ Cname }}
                </h3>
                <!-- sorting -->
                 <app-sort [resultNum]="result" (sortChanged)="handleSort($event)"></app-sort>
             }
            <!-- display data -->
          <div class="parent text-[#7c4947] grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4  gap-3.5 px-10 my-5">
            @for (product of myProducts ; track product._id) {
                  <div class="card group px-2 py-3 border border-[#7c4947] bg-[#f3eaea]  rounded-xl overflow-hidden shadow-sm relative p-1 cursor-pointer">
                      <div [routerLink]="['/details', product._id]">
                        <div class="card-img relative">
                          <img class="w-full  rounded-xl h-[375px] object-cover" [src]="product.imageCover" alt="">
                          @if(product.discountPercentage){
                                <span  class="absolute bottom-0 left-0 bg-[#935452] text-white text-sm font-bold px-2 py-1 rounded shadow-md">
                                    -{{ product.discountPercentage }}%
                                  </span>
                              }
                        </div>
                        <div class="card-body px-2 py-4">
                          <h4 class="text-[13px]">{{ product.category.name }}</h4>

                          <div class="flex justify-between items-center">
                            <h3 class="text-[17px]">
                              {{ product.title.split(' ').slice(0, 3).join(' ') }}
                            </h3>

                            <!-- Wishlist icons -->
                            <div class="text-lg hover:scale-110" (click)="toggleWishlist(product._id); $event.stopPropagation()" [class.hidden]="Inwishlist(product._id)">
                              <i class="fa-regular fa-heart"></i>
                            </div>
                            <div class="text-lg hover:scale-110 text-[#935452]" (click)="toggleWishlist(product._id); $event.stopPropagation()" [class.hidden]="!Inwishlist(product._id)">
                              <i class="fa-solid fa-heart"></i>
                            </div>
                          </div>

                        
                          <div class="flex flex-col items-start mt-2">
                            <div class="flex items-center gap-2">

                                 <span class="font-semibold">
                                {{ product.price }} {{ 'home.priceUnit' | translate }}
                              </span>

                              @if(product.originalPrice){
                                <span  class="text-gray-400 line-through text-sm">
                                {{ product.originalPrice }} {{ 'home.priceUnit' | translate }}
                              </span>
                              }
                              
                           
                            </div>
                            
                            
                          </div>

                          
                          <div class="flex justify-between items-center mt-3">
                            <div class="flex items-center gap-1">
                              <i class="fas fa-star text-yellow-300"></i>
                              <span>{{ product.ratingsAverage }}</span>
                            </div>
                          </div>
                        </div>
                      </div>

                      
                      <a 
                        (click)="addToCart(product._id)" 
                        class="w-[90%] capitalize block mx-auto cursor-pointer text-center px-3 py-2 text-sm text-mainBg bg-[#75413f] rounded-lg hover:bg-[#75413f]/90 transition duration-200 hover:scale-[102%]"
                      >
                        {{ 'home.addToCart' | translate }}
                      </a>
                    </div>
            
            }@empty {
                <div class="col-span-4  flex flex-col items-center justify-center py-24 text-center text-[#235a6f]">
                  <img
                  src="images/no-products-found.png"
                  alt="Sorry - No Products"
                  class="w-72 h-auto mb-6 opacity-95"
                />

                <h2 class="text-2xl font-bold mb-2">Weâ€™re Sorry!</h2>

                
                <p class="text-gray-500 text-sm mb-4 max-w-md">
                  Unfortunately, there are no products available in this category at the moment. Please try again later or explore other categories.
                </p>

                
                <a routerLink="/" class="px-4 py-2 rounded-xl bg-[#7DB1C7] text-[#235a6f]  hover:bg-[#6099ae] transition">
                  Back to Home
                </a>
              </div>
            }
          </div>

        

        </div>
      </section>
      }

}



